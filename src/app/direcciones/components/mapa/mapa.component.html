<div class="col-xl-12 col-sm-12 col-md-12 col-xxl-12 mb-3 mt-3 p-2">
  <!------GOOGLE MAP SITIE------->
  <p-gmap #gmap [style]="{'width':'100%','height':'320px', 'margin-bottom': '1em'}" [options]="options"
    [overlays]="overlays" (onMapClick)="handleMapClick($event)" (onOverlayClick)="handleOverlayClick($event)"
    (onOverlayDragEnd)="handleDragEnd($event)"></p-gmap>
  <!-- ELIMINAR LA UBICACION -->
  <button type="button" class="btn-colors" (click)="clear()" style="margin-right:.25em" title="Eliminar ubicación">
    <svg width="42" height="42" viewBox="0 0 42 42" fill="none" xmlns="http://www.w3.org/2000/svg"
      title="Alejar el mapa">
      <circle cx="21" cy="21" r="21" fill="#F1F3F6" />
      <path
        d="M26.8509 13H17.2252C16.3903 13.0008 15.5899 13.3399 14.9998 13.9429L9.3105 19.7393C9.21211 19.8389 9.13402 19.9574 9.08073 20.088C9.02744 20.2185 9 20.3586 9 20.5C9 20.6414 9.02744 20.7815 9.08073 20.912C9.13402 21.0426 9.21211 21.1611 9.3105 21.2607L14.9998 27.0571C15.5899 27.6601 16.3903 27.9992 17.2252 28H26.8509C27.6861 28 28.4871 27.6614 29.0777 27.0586C29.6682 26.4558 30 25.6382 30 24.7857V16.2143C30 15.3618 29.6682 14.5442 29.0777 13.9414C28.4871 13.3386 27.6861 13 26.8509 13ZM27.9006 24.7857C27.9006 25.0699 27.79 25.3424 27.5932 25.5433C27.3963 25.7443 27.1293 25.8571 26.8509 25.8571H17.2252C16.9473 25.8532 16.6811 25.7422 16.4799 25.5464L11.5359 20.5L16.4799 15.4536C16.6811 15.2578 16.9473 15.1468 17.2252 15.1429H26.8509C27.1293 15.1429 27.3963 15.2557 27.5932 15.4567C27.79 15.6576 27.9006 15.9301 27.9006 16.2143V24.7857ZM24.4471 17.5964C24.3495 17.496 24.2334 17.4163 24.1055 17.3619C23.9776 17.3075 23.8404 17.2795 23.7018 17.2795C23.5633 17.2795 23.4261 17.3075 23.2981 17.3619C23.1702 17.4163 23.0541 17.496 22.9565 17.5964L21.6024 18.9893L20.2483 17.5964C20.0507 17.3947 19.7826 17.2813 19.503 17.2813C19.2235 17.2813 18.9554 17.3947 18.7578 17.5964C18.5601 17.7982 18.4491 18.0718 18.4491 18.3571C18.4491 18.6425 18.5601 18.9161 18.7578 19.1179L20.1224 20.5L18.7578 21.8821C18.6594 21.9817 18.5813 22.1002 18.528 22.2308C18.4747 22.3614 18.4473 22.5014 18.4473 22.6429C18.4473 22.7843 18.4747 22.9243 18.528 23.0549C18.5813 23.1855 18.6594 23.304 18.7578 23.4036C18.8553 23.504 18.9714 23.5837 19.0994 23.6381C19.2273 23.6925 19.3645 23.7205 19.503 23.7205C19.6416 23.7205 19.7788 23.6925 19.9067 23.6381C20.0346 23.5837 20.1507 23.504 20.2483 23.4036L21.6024 22.0107L22.9565 23.4036C23.0541 23.504 23.1702 23.5837 23.2981 23.6381C23.4261 23.6925 23.5633 23.7205 23.7018 23.7205C23.8404 23.7205 23.9776 23.6925 24.1055 23.6381C24.2334 23.5837 24.3495 23.504 24.4471 23.4036C24.5455 23.304 24.6236 23.1855 24.6769 23.0549C24.7302 22.9243 24.7576 22.7843 24.7576 22.6429C24.7576 22.5014 24.7302 22.3614 24.6769 22.2308C24.6236 22.1002 24.5455 21.9817 24.4471 21.8821L23.0825 20.5L24.4471 19.1179C24.5455 19.0183 24.6236 18.8998 24.6769 18.7692C24.7302 18.6386 24.7576 18.4986 24.7576 18.3571C24.7576 18.2157 24.7302 18.0757 24.6769 17.9451C24.6236 17.8145 24.5455 17.696 24.4471 17.5964Z"
        fill="#282828" />
    </svg>

  </button>
  <!-- ZOOM -->
  <button type="button" class="btn-colors" (click)="zoomIn(gmap.getMap())" style="margin-right:.25em"
    title="Acercar el mapa"><svg width="42" height="42" viewBox="0 0 42 42" fill="none"
      xmlns="http://www.w3.org/2000/svg">
      <circle cx="21" cy="21" r="21" fill="#F1F3F6" />
      <path
        d="M24.3625 19.6211H21.5142V16.7706C21.5142 16.5186 21.4142 16.277 21.2361 16.0988C21.0581 15.9206 20.8166 15.8205 20.5648 15.8205C20.313 15.8205 20.0715 15.9206 19.8934 16.0988C19.7154 16.277 19.6153 16.5186 19.6153 16.7706V19.6211H16.767C16.5152 19.6211 16.2737 19.7212 16.0957 19.8994C15.9176 20.0776 15.8176 20.3193 15.8176 20.5713C15.8176 20.8233 15.9176 21.0649 16.0957 21.2431C16.2737 21.4213 16.5152 21.5214 16.767 21.5214H19.6153V24.3719C19.6153 24.6239 19.7154 24.8656 19.8934 25.0438C20.0715 25.2219 20.313 25.3221 20.5648 25.3221C20.8166 25.3221 21.0581 25.2219 21.2361 25.0438C21.4142 24.8656 21.5142 24.6239 21.5142 24.3719V21.5214H24.3625C24.6143 21.5214 24.8558 21.4213 25.0339 21.2431C25.2119 21.0649 25.3119 20.8233 25.3119 20.5713C25.3119 20.3193 25.2119 20.0776 25.0339 19.8994C24.8558 19.7212 24.6143 19.6211 24.3625 19.6211ZM30.7332 29.3982L27.2108 25.9017C28.5781 24.1956 29.2402 22.03 29.0611 19.8504C28.8819 17.6707 27.8751 15.6426 26.2476 14.183C24.6202 12.7235 22.4957 11.9434 20.3112 12.0032C18.1266 12.063 16.048 12.9582 14.5028 14.5047C12.9575 16.0511 12.063 18.1313 12.0032 20.3175C11.9434 22.5037 12.7229 24.6297 14.1814 26.2585C15.6398 27.8872 17.6664 28.8948 19.8444 29.074C22.0224 29.2533 24.1863 28.5907 25.8911 27.2224L29.385 30.7189C29.4733 30.808 29.5783 30.8787 29.694 30.9269C29.8097 30.9752 29.9338 31 30.0591 31C30.1845 31 30.3086 30.9752 30.4242 30.9269C30.5399 30.8787 30.645 30.808 30.7332 30.7189C30.9043 30.5418 31 30.305 31 30.0586C31 29.8122 30.9043 29.5754 30.7332 29.3982ZM20.5648 27.2224C19.2503 27.2224 17.9654 26.8323 16.8724 26.1015C15.7795 25.3706 14.9276 24.3319 14.4246 23.1165C13.9216 21.9012 13.79 20.5639 14.0464 19.2737C14.3029 17.9835 14.9358 16.7984 15.8653 15.8682C16.7948 14.9381 17.979 14.3046 19.2682 14.048C20.5574 13.7913 21.8937 13.9231 23.1081 14.4265C24.3225 14.9299 25.3605 15.7824 26.0908 16.8761C26.821 17.9699 27.2108 19.2558 27.2108 20.5713C27.2108 22.3353 26.5106 24.027 25.2642 25.2743C24.0179 26.5216 22.3274 27.2224 20.5648 27.2224Z"
        fill="#282828" />
    </svg>
  </button>
  <!-- ALEJAR -->
  <button type="button" class="btn-colors" (click)="zoomOut(gmap.getMap())" title="Alejar mapa">
    <svg width="42" height="42" viewBox="0 0 42 42" fill="none" xmlns="http://www.w3.org/2000/svg">
      <circle cx="21" cy="21" r="21" fill="#F1F3F6" />
      <path
        d="M30.7332 29.3982L27.2108 25.9017C28.5781 24.1956 29.2402 22.03 29.0611 19.8504C28.8819 17.6707 27.8751 15.6426 26.2476 14.183C24.6202 12.7235 22.4957 11.9434 20.3112 12.0032C18.1266 12.063 16.048 12.9582 14.5028 14.5047C12.9575 16.0511 12.063 18.1313 12.0032 20.3175C11.9434 22.5037 12.7229 24.6297 14.1814 26.2585C15.6398 27.8872 17.6664 28.8948 19.8444 29.074C22.0224 29.2533 24.1863 28.5907 25.8911 27.2224L29.385 30.7189C29.4733 30.808 29.5783 30.8787 29.694 30.9269C29.8097 30.9752 29.9338 31 30.0591 31C30.1845 31 30.3086 30.9752 30.4242 30.9269C30.5399 30.8787 30.645 30.808 30.7332 30.7189C30.9043 30.5418 31 30.305 31 30.0586C31 29.8122 30.9043 29.5754 30.7332 29.3982V29.3982ZM20.5648 27.2224C19.2503 27.2224 17.9654 26.8323 16.8724 26.1015C15.7795 25.3706 14.9276 24.3319 14.4246 23.1165C13.9216 21.9012 13.79 20.5639 14.0464 19.2737C14.3029 17.9835 14.9358 16.7984 15.8653 15.8682C16.7948 14.9381 17.979 14.3046 19.2682 14.048C20.5574 13.7913 21.8937 13.9231 23.1081 14.4265C24.3225 14.9299 25.3605 15.7824 26.0908 16.8761C26.821 17.9699 27.2108 19.2558 27.2108 20.5713C27.2108 22.3353 26.5106 24.027 25.2642 25.2743C24.0179 26.5216 22.3274 27.2224 20.5648 27.2224V27.2224ZM24.3625 19.6211H16.767C16.5152 19.6211 16.2737 19.7212 16.0957 19.8994C15.9176 20.0776 15.8176 20.3193 15.8176 20.5713C15.8176 20.8233 15.9176 21.0649 16.0957 21.2431C16.2737 21.4213 16.5152 21.5214 16.767 21.5214H24.3625C24.6143 21.5214 24.8558 21.4213 25.0339 21.2431C25.2119 21.0649 25.3119 20.8233 25.3119 20.5713C25.3119 20.3193 25.2119 20.0776 25.0339 19.8994C24.8558 19.7212 24.6143 19.6211 24.3625 19.6211Z"
        fill="#282828" />
    </svg>
  </button>
</div>
<!--------MODAL PARA AGREGAR LA NUEVA UBICACION------------->
<ng-container [formGroup]="formB.formDireccion">
  <p-dialog showEffect="fade" [(visible)]="dialogVisible" header="Nueva ubicación" [style]="{width: '300px'}">
    <div class="grid p-fluid" *ngIf="selectedPosition">
      <!-- DIRECCION -->
      <div class="mb-3">
        <label for="Descripcion" class="form-label">Descripción</label>
        <input type="text" class="form-control" id="Descripcion" (change)="eventTarget($event);"
          formControlName="descripcion" />
        <app-form-errors-container [forControl]="formB.formDireccion.get('descripcion')">
          <app-message-error forErrorCode="required"></app-message-error>
          <app-message-error forErrorCode="pattern" [customMsg]="'No se admite caracteres especiales ej:</>'">
          </app-message-error>
        </app-form-errors-container>
      </div>
      <!-- TELEFONO -->
      <div class="mb-3">
        <label for="celular" class="form-label">Celular</label>
        <input type="text" maxlength="10" class="form-control" id="celular" (change)="eventTarget($event);"
          formControlName="telefono" />
        <app-form-errors-container [forControl]="formB.formDireccion.get('telefono')">
          <app-message-error forErrorCode="required"></app-message-error>
          <app-message-error forErrorCode="minLength" [customMsg]="'Minimo 5 caracteres'"></app-message-error>
          <app-message-error forErrorCode="maxlength" [customMsg]="'Máximo 200 caracteres'"></app-message-error>
          <app-message-error forErrorCode="pattern" [customMsg]="'Solo se acepta números'">
          </app-message-error>
        </app-form-errors-container>
      </div>

      <div class="mb-3">
        <label for="Latitud" class="form-label">Latitud</label>
        <input type="text" class="form-control" id="Latitud" [attr.disabled]="true"
          formControlName="latitud_direccion" />
      </div>

      <div class="mb-3">
        <label for="Longitud" class="form-label">Longitud</label>
        <input type="text" class="form-control" id="Longitud" [attr.disabled]="true"
          formControlName="longitud_direccion" />
      </div>
    </div>

    <ng-template pTemplate="footer">
      <div class="col-xl-12 col-xxl-12 col-sm-12 col-md-12 col-12">
        <button type="button" class="btn btn-secondary" (click)="closeModal()">Cancelar</button>
        <button type="button" class="btn btn-dark" [disabled]="formB.formDireccion.invalid"
          (click)="addMarker()">Agregar</button>
      </div>
    </ng-template>
  </p-dialog>
</ng-container>
